extends ../layouts/defaultLayout
block stylesheets
    //link(href=relativeRoot+"../css/common/index.min.css",type="text/css",rel="stylesheet")
block content
    div.tree

    script(type="text/javascript").
        require(['jquery', 'gx-tree'], function ($) {

            /**
             * 默认 叶子节点才发 a(href) 的请求, 否则只是收起和展开
             *
             有 onNodeClick 配置项时, 永远不会自动发请求, 叶子节点才回调
             有 allClickCallBack:true 这个配置项时, 不管什么节点都会 回调, 只能和 callback组合使用才生效.

             下面三个配置项, 用来指定 对数据的取值。
             options.pathAttrName || 'path',    路径
             options.codeAttrName || 'code',     code 属性名
             options.nameAttrName || 'name',   显示name
             options.subListAttrName || 'items',   子记录集合
             options.iconClassAttrName || 'iconClass',   icon class
             options.cur || null,
             options.curClass || 'cur'
             */
            $('.tree').tree({
                data: !{JSON.stringify(list)},
                cur: 16,
                curClass: 'cur',
                codeAttrName: 'id',         // 取值配置示例: 因为数据的属性名和组件定义的默认属性名存在差异,  特此配置
                onNodeClick: function (item) {
                    // 回调整个 对象, 随你处置
                    console.log(item);
                }
                // allClickCallBack: false
            });
        });